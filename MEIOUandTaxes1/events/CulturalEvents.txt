###################
# Cultural Events #
###################

namespace = cultural_event

### COMMEDIA DEL'ARTE PERFORMANCES
country_event = {
	id = cultural_event.1
	title = cultural_event.1.t
	desc = cultural_event.1.d
	picture = THEATRE_eventPicture

	trigger = {
		western_christian = yes
		capital_scope = { 
		    continent = europe
            check_key = { lhs = Class_Urban value = 20 }		
		}
		has_institution = Casual_Literacy
		NOT = { is_institution_enabled = Academia }
		NOT = { has_country_flag = commedia_dellarte }
	}
	
	mean_time_to_happen = {
		months = 180
		modifier = {
			factor = 0.5
			full_idea_group = culture_ideas
		}
	}
	
	immediate = {
		set_country_flag = commedia_dellarte
	}
		
	option = {
		name = cultural_event.1.a
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.3
				NOT = { treasury = 25 }
			}
			modifier = {
				factor = 0.3
				num_of_loans = 1
			}
		}
		add_country_modifier = {
			name = "commedia_dellarte"
			duration = 1460
		}
		add_adm_power = -10
		add_treasury = -25
		hidden_effect = {
		    capital_scope = {
			    Public_ChangeClassWealthVal = { class=BG type=value inp=25 }
		    }
		}
	}
	option = {
		name = cultural_event.1.b
		ai_chance = {
			factor = 10
		}
		add_prestige = -5
	}
}

### THE LAST JOUSTING TOURNAMENT
country_event = {
	id = cultural_event.5
	title = cultural_event.5.t
	desc = cultural_event.5.d
	picture = TOURNAMENT_eventPicture

	trigger = {
		OR = {
		    religion = catholic
			religion = avignonist
		}
		capital_scope = { 
		    continent = europe
            check_key = { lhs = Class_Urban value = 10 }		
		}
		government = monarchy
		army_tradition = 15
		mil_tech = 25 #circa 1450
		NOT = { mil_tech = 35 } #circa 1550
		NOT = {
			has_country_flag = last_jousting_tournament_held
		}
	}
	
	mean_time_to_happen = {
		months = 180
	}
	
	immediate = {
		set_country_flag = last_jousting_tournament_held
	}
	
	option = {
		name = cultural_event.5.a
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.1
				NOT = { treasury = 50 }
			}
		}
	    add_treasury = -50
		add_country_modifier = {
		 	name = "the_last_joust"
		 	duration = 3650 #10 years
		}
		hidden_effect = {
		    #Urban residents got their share from the tournament
		    capital_scope = {
			    Public_ChangeClassWealthVal = { class=RE type=value inp=25 }
			    Public_ChangeClassWealthVal = { class=BG type=value inp=25 }
		    }
		}
	}
	option = {
		name = cultural_event.5.b
		ai_chance = { factor = 10 }
		add_prestige = -5
	}
}