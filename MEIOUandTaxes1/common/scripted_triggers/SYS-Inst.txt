Inst_Can_Legalism = {
	always = yes
}
Inst_Can_Legalism_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Legalism

    	always = yes
	}
}
Inst_Can_Legalism_Country = {
	Inst_Can_Legalism_Country_Invent = yes
}
Inst_Can_Legalism_Country_Invent = {
	AND = {
		total_development = 100

		adm = 3
	}
}
Inst_Can_Legalism_Prov = {
	AND = {
		OR = {
			is_capital = yes

			check_key = { lhs = Infra_Capitol value = 1 }
		}
	}
}
Inst_Can_Legalism_Spread = {
	NOT = { check_key = { lhs = Prov_TRPow value = 50.001 } }
}
Inst_Can_Legalism_Embrace = {
	AND = {
		custom_trigger_tooltip = {
			tooltip = Pol_Identity3NOT
			NOT = { 
				has_reform = Pol_Identity3
				#is_key_equal = { lhs = Pol_Identity value = 2 }
			}
		}
	}
}

Inst_Can_Meritocracy_Inst = {
	always = yes
}

Inst_Can_Meritocracy_Inst_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Meritocracy_Inst

    	always = yes
	}
}
Inst_Can_Meritocracy_Inst_Country = {
	Inst_Can_Meritocracy_Inst_Country_Invent = yes
}

Inst_Can_Meritocracy_Inst_Country_Invent = {
	AND = {
		Privilege_HasGreater = { Privilege=BUOffice Lvl=2 }
		Privilege_HasGreater = { Privilege=BUFarm Lvl=2 }
		Privilege_HasGreater = { Privilege=BUHierarchy Lvl=1 }
		Privilege_HasGreater = { Privilege=BUHire Lvl=3 }
		Privilege_HasGreater = { Privilege=BUExams Lvl=2 }
		Privilege_HasGreater = { Privilege=BUStructure Lvl=2 }
		Privilege_HasGreater = { Privilege=BUCourts Lvl=2 }

		adm = 3
	}
}
Inst_Can_Meritocracy_Inst_Prov = {
	AND = {
		Legalism = 100
		OR = {
			is_capital = yes

			check_key = { lhs = Infra_Capitol value = 1 }
		}
	}
}
Inst_Can_Meritocracy_Inst_Spread = {
	AND = {
		Legalism = 100
		owner = {
			custom_trigger_tooltip = {
				tooltip = Privilege_BUOffice2HasGreater
				Privilege_HasGreater = { Privilege=BUOffice Lvl=2 }
			}
			custom_trigger_tooltip = {
				tooltip = Privilege_BUFarm2HasGreater
				Privilege_HasGreater = { Privilege=BUFarm Lvl=2 }
			}
			custom_trigger_tooltip = {
				tooltip = Privilege_BUHierarchy1HasGreater
				Privilege_HasGreater = { Privilege=BUHierarchy Lvl=1 }
			}
			custom_trigger_tooltip = {
				tooltip = Privilege_BUHire1HasGreater
				Privilege_HasGreater = { Privilege=BUHire Lvl=1 }
			}
			custom_trigger_tooltip = {
				tooltip = Privilege_BUStructure2HasGreater
				Privilege_HasGreater = { Privilege=BUStructure Lvl=2 }
			}
			custom_trigger_tooltip = {
				tooltip = Privilege_BUCourts2HasGreater
				Privilege_HasGreater = { Privilege=BUCourts Lvl=2 }
			}
		}
	}
}
Inst_Can_Meritocracy_Inst_Embrace = {
	AND = {
		has_institution = Legalism
		custom_trigger_tooltip = {
			tooltip = Privilege_BUOffice2HasGreater
			Privilege_HasGreater = { Privilege=BUOffice Lvl=2 }
		}
		custom_trigger_tooltip = {
			tooltip = Privilege_BUFarm2HasGreater
			Privilege_HasGreater = { Privilege=BUFarm Lvl=2 }
		}
		custom_trigger_tooltip = {
			tooltip = Privilege_BUHierarchy1HasGreater
			Privilege_HasGreater = { Privilege=BUHierarchy Lvl=1 }
		}
		custom_trigger_tooltip = {
			tooltip = Privilege_BUHire1HasGreater
			Privilege_HasGreater = { Privilege=BUHire Lvl=1 }
		}
		custom_trigger_tooltip = {
			tooltip = Privilege_BUStructure2HasGreater
			Privilege_HasGreater = { Privilege=BUStructure Lvl=2 }
		}
		custom_trigger_tooltip = {
			tooltip = Privilege_BUCourts2HasGreater
			Privilege_HasGreater = { Privilege=BUCourts Lvl=2 }
		}
	}
}

Inst_Can_Banking = {
	always = yes
}
Inst_Can_Banking_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Banking
    	always = yes
	}
}
Inst_Can_Banking_Country = {
	Inst_Can_Banking_Country_Invent = yes
}
Inst_Can_Banking_Country_Invent = {
	AND = {
		Rights_BGCom8HasGreater = yes

		NOT = {
			Rights_BGGov3Has = yes
		}
	}
}
Inst_Can_Banking_Prov = {
	AND = {
		Legalism = 100

		has_local_modifier_value = { which = trade_value value = 5 }
		
		NOT = {
			check_key = { lhs = TN_SubsistenceDisp value = 60 }
		}

		check_key = { lhs = Prov_BGPow value = 40 }
		
		# prevent weird shit
		OR = {
			NOT = { culture = greek }
			is_year = 1450
			owner = { ai = no }
		}
	}
}
Inst_Can_Banking_Spread = {
	AND = {
		Legalism = 100
		owner = {
			custom_trigger_tooltip = {
				tooltip = Rights_BGCom7HasGreater
				Rights_BGCom7HasGreater = yes
			}
		}
		
		NOT = {
			check_key = { lhs = TN_SubsistenceDisp value = 60 }
		}
	}
}
Inst_Can_Banking_Embrace = {
	AND = {
		has_institution = Legalism
		custom_trigger_tooltip = {
			tooltip = Rights_BGCom7HasGreater
			Rights_BGCom7HasGreater = yes
		}
	}
}

Inst_Can_Columbian_Exchange = {
    is_year = 1400 # for performance reasons don't check before 1400
}
Inst_Can_Columbian_Exchange_Country = {
	Inst_Can_Columbian_Exchange_Country_Invent = yes
}
Inst_Can_Columbian_Exchange_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Columbian_Exchange
		any_country = {
			exists = yes
			OR = {
				is_colonial_nation = yes
				AND = {
					OR = {
						technology_group = north_american
						technology_group = mesoamerican
						technology_group = south_american
						technology_group = andean
						technology_group = high_american
					}
					
					any_owned_province = {
						has_port = yes
						
						NOT = {
							continent = south_america
							continent = north_america
							continent = oceania
						}
					}
				}
			}
		}
	}
}
Inst_Can_Columbian_Exchange_Country_Invent = {
	AND = {
		OR = {
			AND = {
				capital_scope = {
					OR = {
						continent = south_america
						continent = north_america
					}
				}
				
				any_owned_province = {
					has_port = yes
					
					NOT = {
						continent = south_america
						continent = north_america
						continent = oceania
					}
				}
			}
			
			any_subject_country = {
				is_colonial_nation = yes

				capital_scope = {
					OR = {
						continent = south_america
						continent = north_america
					}
				}
			}
		}
	}
}
Inst_Can_Columbian_Exchange_Prov = {
	AND = {
		Banking = 100

		has_port = yes

		has_local_modifier_value = { which = trade_value value = 5 }
	}
}
Inst_Can_Columbian_Exchange_Spread = {
	always = yes
}
Inst_Can_Columbian_Exchange_Embrace = {
	always = yes
}

Inst_Can_Casual_Literacy = {
    is_year = 1460 # for performance reasons don't check before 1460, 40 years ahead of tech 31
}
Inst_Can_Casual_Literacy_Country = {
	AND = {
		OR = {
			is_year = 1500	# 10 Years after Printing press technology
			adm_tech = 31	# Printing Press Technology
			any_known_country = { has_institution = Casual_Literacy }
		}
		Inst_Can_Casual_Literacy_Country_Invent = yes
	}
}
Inst_Can_Casual_Literacy_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Casual_Literacy
		AND = {
			OR = {
				is_year = 1500	# 10 Years after Printing press technology
				any_country = {
					exists = yes
					adm_tech = 31	# Printing Press Technology
					Inst_Can_Casual_Literacy_Country_Invent = yes
				}
			}
		}
	}
}
Inst_Can_Casual_Literacy_Country_Invent = {
	always = yes
}
Inst_Can_Casual_Literacy_Prov = {
	AND = {
		Banking = 100
		
		#continent = europe # Latin/Greek alphabetic script

		check_key = { lhs = TN_ProvSply41 value = 2 }
		
		Prod_HasProd = { Prod=30 }
	}
}
Inst_Can_Casual_Literacy_Spread = {
	AND = {
		Legalism = 100
		Banking = 100
	}
}
Inst_Can_Casual_Literacy_Embrace = {
	AND = {
		has_institution = Legalism
		has_institution = Banking
	}
}

Inst_Can_Scientific_Method = {
    is_year = 1520 # for performance reasons don't check before 1520, 40 years ahead of tech 37
}

Inst_Can_Scientific_Method_Country = {
	AND = {
		OR = {
			is_year = 1620
			adm_tech = 37
			any_known_country = { has_institution = Scientific_Method }
		}
		Inst_Can_Scientific_Method_Country_Invent = yes
	}
}

Inst_Can_Scientific_Method_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Scientific_Method
		AND = {
			OR = {
				is_year = 1620
				any_country = {
					exists = yes
					adm_tech = 37
					Inst_Can_Scientific_Method_Country_Invent = yes
				}
			}
		}
	}
}
Inst_Can_Scientific_Method_Country_Invent = {
	AND = {
		has_institution = Casual_Literacy
		#OR = {                                      #Enable when all institutions are in (AI stop picking ideas due to behind in tech from lacking institutions). Alternatively use personal freedom rights
		#	has_idea = innovativeness_ideas_4
		#	has_idea = culture_ideas_7
		##	has_idea = economic_ideas_7
		#	has_idea = humanist_ideas_3
		#	has_idea = representation_ideas_2
		#}
	}
}

Inst_Can_Scientific_Method_Prov = { 
	AND = {
		Legalism = 100
		Casual_Literacy = 100
		NOT = { unrest = 1 }
	}
}

Inst_Can_Scientific_Method_Spread = {
	AND = {
		Legalism = 100
		Casual_Literacy = 100
		owner = {
			adm_tech = 30
		}
	}
}
Inst_Can_Scientific_Method_Embrace = {
	AND = {
		has_institution = Legalism
		has_institution = Casual_Literacy
	}
}

Inst_Can_Global_Trade = {
    is_year = 1550 # for performance reasons dont check before 1600    #Mepper: seems too late, moving it forward a bit on suggestion of Jark
}
Inst_Can_Global_Trade_Country = {
	Inst_Can_Global_Trade_Country_Invent = yes
}
Inst_Can_Global_Trade_Spawn = {
	#AND = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Global_Trade
		any_country = {
			exists = yes
			Inst_Can_Global_Trade_Country_Invent = yes
		}
	}
	#}
}
Inst_Can_Global_Trade_Country_Invent = {
	AND = {
		has_institution = Banking

		has_country_flag = Global_Trade_CanSpawnCountry # calculated in scripted effects
	}
}
Inst_Global_Trade_Fulfill_Contintent = {
	any_province = {
		OR = {
			owned_by = ROOT
			owner = { is_colonial_nation_of = ROOT }
		}
		has_local_modifier_value = { which = trade_value value = 2 } # `GLOBAL_TRADE_REQUIRED_TRADE_VALUE~value`
		continent = $cont$
	}
}
Inst_Can_Global_Trade_Prov = {
	AND = {
		Banking = 100

		has_local_modifier_value = { which = trade_value value = 5 }
	}
}
Inst_Can_Global_Trade_Spread = {
	AND = {
		Legalism = 100
		OR = {
			Banking = 100
			has_local_modifier_value = { which = trade_value value = 4 }
		}
	}
}
Inst_Can_Global_Trade_Embrace = {
	AND = {
		has_institution = Legalism
		OR = {
			has_institution = Banking
			any_owned_province = { has_local_modifier_value = { which = trade_value value = 2 } }
		}
	}
}

Inst_Can_Academia = {
    is_year = 1610 # for performance reasons don't check before 1610, 40 years ahead of tech 46
}
Inst_Can_Academia_Country = {
	AND = {
		OR = {
			is_year = 1710
			adm_tech = 46
			any_known_country = { has_institution = Academia }
		}
		Inst_Can_Academia_Country_Invent = yes
	}
}
Inst_Can_Academia_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Academia
		AND = {
			OR = {
				is_year = 1710
				any_country = {
					exists = yes
					adm_tech = 46
					Inst_Can_Academia_Country_Invent = yes
				}
			}
		}
	}
}
Inst_Can_Academia_Country_Invent = {
	has_institution = Scientific_Method 
}
Inst_Can_Academia_Prov = {
	AND = {
		Scientific_Method = 100
		Legalism = 100
		NOT = { unrest = 1 }
		check_key = { lhs = Prov_BUPow value = 25 }
	}
}
Inst_Can_Academia_Spread = {
	AND = {
		Legalism = 100
		Scientific_Method = 100
		owner = { adm_tech = 40 }
	}
}
Inst_Can_Academia_Embrace = {
	AND = {
		has_institution = Legalism
		has_institution = Scientific_Method
	}
}

Inst_Can_Nationalism = {
    is_year = 1670 # for performance reasons don't check before 1670, 40 years ahead of tech 52
}
Inst_Can_Nationalism_Country = {
	AND = {
		OR = {
			is_year = 1740
			adm_tech = 52
		}
		has_institution = Casual_Literacy
	}
}
Inst_Can_Nationalism_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Nationalism
		AND = {
			OR = {
				is_year = 1740
				any_country = {
					exists = yes
					adm_tech = 52
					Inst_Can_Nationalism_Country_Invent = yes
				}
			}
		}
	}
}
Inst_Can_Nationalism_Country_Invent = {
	has_institution = Casual_Literacy 
	has_country_flag = Nationalism_CanSpawnCountry
}
Inst_Can_Nationalism_Prov = {
	AND = {
		Casual_Literacy = 100
		OR = {
			has_owner_accepted_culture = yes
			has_owner_culture = yes
			culture_group = owner
		}
		check_key = { lhs = Prov_BUPow value = 25 }
	}
}
Inst_Can_Nationalism_Spread = {
    Casual_Literacy = 100
}
Inst_Can_Nationalism_Embrace = {
    has_institution = Casual_Literacy
}

Inst_Can_Industrialisation = {
    is_year = 1710 # for performance reasons don't check before 1710, 40 years ahead of tech 56
}
Inst_Can_Industrialisation_Country = {
	AND = {
		OR = {
			is_year = 1750
			adm_tech = 56
			any_known_country = { has_institution = Industrialisation }
		}
		Inst_Can_Industrialisation_Country_Invent = yes
	}
}
Inst_Can_Industrialisation_Spawn = {
	custom_trigger_tooltip = {
		tooltip = Requirements_Industrialisation
		AND = {
			OR = {
				is_year = 1750
				any_country = {
					exists = yes
					adm_tech = 56
					Inst_Can_Industrialisation_Country_Invent = yes
				}
			}
		}
	}
}
Inst_Can_Industrialisation_Country_Invent = {
	AND = {
		adm_tech = 44
		has_institution = Banking
		has_institution = Scientific_Method
		#has_idea = industrial_ideas_5
	}
}
Inst_Can_Industrialisation_Prov = {
	AND = {
		Banking = 100
		Scientific_Method = 100
	}

}
Inst_Can_Industrialisation_Spread = {
	AND = {
		owner = { adm_tech = 44 }
		Banking = 100
		Scientific_Method = 100 
		check_key = { lhs = Building_Industrial value = 1 }
	}
}
Inst_Can_Industrialisation_Embrace = {
	AND = {
		has_institution = Banking
		has_institution = Scientific_Method
	}
}
Writing_Trigger = {
	OR = {
		AND = {
			continent = europe
			### NE Europe
			NOT = { culture = nenet }
			NOT = { culture = uralic }
			NOT = { culture = mari }
			NOT = { culture = udmurt }
			### Partial Steppe
			NOT = { province_id = 1431 }
			NOT = { province_id = 285 }
			NOT = { province_id = 302 }
			NOT = { province_id = 4942 }
			NOT = { province_id = 4615 }
			NOT = { province_id = 4020 }
			NOT = { province_id = 4111 }
			NOT = { province_id = 2439 }
			NOT = { province_id = 1287 }
			NOT = { province_id = 4112 }
			NOT = { province_id = 2438 }
			OR = {
				AND = {
					NOT = { culture = nogai }
					NOT = { culture = tartar }
				}
				province_id = 1310
				province_id = 1293
				province_id = 3287
				province_id = 4016
			}
		}
		AND = {
			continent = central_asia
			NOT = { culture = bashkir }
			NOT = { province_id = 2442 }
			NOT = { province_id = 439 }
			NOT = { province_id = 441 }
			OR = {
				NOT = { culture = tartar }
				AND = {
					region = syrdarya_region
					NOT = { province_id = 3285 }
				}
				AND = {
					region = zungaria_region
					NOT = { province_id = 477 }
				}
			}
		}
		AND = {
			continent = indian_continent
			NOT = { province_id = 574 }
			NOT = { province_id = 420 }
		}
		AND = {
			continent = asia
			NOT = { culture_group = nivkh_group }
			NOT = { culture_group = tungusic }
			NOT = { culture_group = nivkh_group }
			NOT = { culture_group = aynu_group }
			NOT = { province_id = 574 }
			NOT = { province_id = 420 }
			#Taiwan
			NOT = { province_id = 2303 }
			NOT = { province_id = 2305 }
			NOT = { province_id = 2304 }
		}
		continent = southeast_asia
		# Mongolian Siberia
		province_id = 1060
		province_id = 1062
		AND = {
			continent = mena
			NOT = { culture = shilluk }
		}
		# Africa
		culture_group = swahili_group
		province_id = 1228
		region = hausa_region
		region = niger_bend_region
		region = manding_region
		region = senegambia_region
		culture = mossi
		#Kanem
		province_id = 2950
		province_id = 2948
		province_id = 1133
		province_id = 1563
		province_id = 1221

		## Americas
		culture_group = maya
		culture = mixtec
		province_id = 3532
		province_id = 1471
		province_id = 2200
		province_id = 2410
		culture_group = andean_group
		culture_group = north_central_tradition_group
		culture = manteno
	}
	#Africa
	NOT = { province_id = 5083 }
	NOT = { province_id = 2192 }
	NOT = { province_id = 3671 }
	NOT = { province_id = 2767 }
	NOT = { province_id = 2218 }
}